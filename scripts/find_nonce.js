const rlp = require('rlp');
const keccak = require('keccak');

const findNonce = () => {
  var factoryAddress = '0x76e2cfc1f5fa8f6a5b3fc4c8f4788f0116861f9b';
  var target = '0x4f3a120e72c76c22ae802d129f599bfdbc31cb81';
  var nonce = 1;

  while (true) {
    var input_arr = [factoryAddress, parseInt(nonce.toString(16), 16)];
    var rlp_encoded = rlp.encode(input_arr);
    var contract_address_long = keccak('keccak256').update(Buffer.from(rlp_encoded)).digest('hex');
    var contract_address = '0x' + contract_address_long.substring(24);

    if (contract_address == target) {
      console.log(nonce);
      console.log(contract_address);
      return;
    }

    nonce++;
  }
};

findNonce();
